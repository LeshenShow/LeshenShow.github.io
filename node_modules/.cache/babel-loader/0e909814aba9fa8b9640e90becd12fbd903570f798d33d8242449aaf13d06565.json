{"ast":null,"code":"import React from\"react\";import Profile from\"./Profile\";import{connect}from\"react-redux\";import{getStatus,getUserProfile,updateStatus}from\"../../redux/profileReducer\";import{useLocation,useNavigate,useParams}from\"react-router-dom\";import{withAuthRedirect}from\"../../hoc/withAuthRedirect\";import{compose}from\"redux\";import{jsx as _jsx}from\"react/jsx-runtime\";class ProfileContainer extends React.Component{componentDidMount(){let userId=this.props.router.params.userId;if(!userId){userId=this.props.authorizedUserId;//  kпохая практика лучше делать это в рендере  а еще лучше чтобы стейт делал редирект\nif(!userId){this.props.history.push(\"/login\");}}console.log(\"componentDidMount Props\",this.props);this.props.getUserProfile(userId);// console.log(\"componentDidMount Response\", response);// console.log(\"data\", data);\nthis.props.getStatus(userId);}render(){return/*#__PURE__*/_jsx(Profile,{...this.props,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus});}}function withRouter(Component){function ComponentWithRouterProp(props){let location=useLocation();let navigate=useNavigate();let params=useParams();return/*#__PURE__*/_jsx(Component,{...props,router:{location,navigate,params}});}return ComponentWithRouterProp;}let mapStateToProps=state=>({profile:state.profilePage.profile,status:state.profilePage.status,isAuth:state.auth.isAuth,authorizedUserId:state.auth.userId});let mapDispatchToProps={getUserProfile,getStatus,updateStatus};// let withUrlDataContainerComponent = withRouter(ProfileContainer);\n// export default connect(\n//   mapStateToProps,\n//   mapDispatchToProps\n// )(withUrlDataContainerComponent);\n// сломалось? поставил на паузу проверку аутентификации\n// let AuthRedirectComponent = withAuthRedirect(ProfileContainer);\n// let withUrlDataContainerComponent = withRouter(AuthRedirectComponent);\nexport default compose(withRouter,connect(mapStateToProps,mapDispatchToProps),withAuthRedirect)(ProfileContainer);// долгий вараиант\n// compose(\n//   connect(mapStateToProps, mapDispatchToProps),\n//   withUrlDataContainerComponent,\n//   withAuthRedirect\n// )(ProfileContainer);\n// export default connect(\n//   mapStateToProps,\n//   mapDispatchToProps\n// )(withUrlDataContainerComponent);","map":{"version":3,"names":["React","Profile","connect","getStatus","getUserProfile","updateStatus","useLocation","useNavigate","useParams","withAuthRedirect","compose","jsx","_jsx","ProfileContainer","Component","componentDidMount","userId","props","router","params","authorizedUserId","history","push","console","log","render","profile","status","withRouter","ComponentWithRouterProp","location","navigate","mapStateToProps","state","profilePage","isAuth","auth","mapDispatchToProps"],"sources":["C:/Users/Leshen/Desktop/JS/after_courses/react/ZooPlanet/LeshenShow.github.io/src/components/Profile/ProfileContainer.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Profile from \"./Profile\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getStatus,\r\n  getUserProfile,\r\n  updateStatus,\r\n} from \"../../redux/profileReducer\";\r\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\r\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\r\nimport { compose } from \"redux\";\r\n\r\nclass ProfileContainer extends React.Component {\r\n  componentDidMount() {\r\n    let userId = this.props.router.params.userId;\r\n    if (!userId) {\r\n      userId = this.props.authorizedUserId;\r\n      //  kпохая практика лучше делать это в рендере  а еще лучше чтобы стейт делал редирект\r\n      if (!userId) {\r\n        this.props.history.push(\"/login\");\r\n      }\r\n    }\r\n    console.log(\"componentDidMount Props\", this.props);\r\n    this.props.getUserProfile(userId); // console.log(\"componentDidMount Response\", response);// console.log(\"data\", data);\r\n    this.props.getStatus(userId);\r\n  }\r\n  render() {\r\n    return (\r\n      <Profile\r\n        {...this.props}\r\n        profile={this.props.profile}\r\n        status={this.props.status}\r\n        updateStatus={this.props.updateStatus}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nfunction withRouter(Component) {\r\n  function ComponentWithRouterProp(props) {\r\n    let location = useLocation();\r\n    let navigate = useNavigate();\r\n    let params = useParams();\r\n    return <Component {...props} router={{ location, navigate, params }} />;\r\n  }\r\n  return ComponentWithRouterProp;\r\n}\r\nlet mapStateToProps = (state) => ({\r\n  profile: state.profilePage.profile,\r\n  status: state.profilePage.status,\r\n  isAuth: state.auth.isAuth,\r\n  authorizedUserId: state.auth.userId,\r\n});\r\nlet mapDispatchToProps = { getUserProfile, getStatus, updateStatus };\r\n\r\n// let withUrlDataContainerComponent = withRouter(ProfileContainer);\r\n// export default connect(\r\n//   mapStateToProps,\r\n//   mapDispatchToProps\r\n// )(withUrlDataContainerComponent);\r\n\r\n// сломалось? поставил на паузу проверку аутентификации\r\n// let AuthRedirectComponent = withAuthRedirect(ProfileContainer);\r\n// let withUrlDataContainerComponent = withRouter(AuthRedirectComponent);\r\nexport default compose(\r\n  withRouter,\r\n  connect(mapStateToProps, mapDispatchToProps),\r\n  withAuthRedirect\r\n)(ProfileContainer);\r\n\r\n// долгий вараиант\r\n// compose(\r\n//   connect(mapStateToProps, mapDispatchToProps),\r\n//   withUrlDataContainerComponent,\r\n//   withAuthRedirect\r\n// )(ProfileContainer);\r\n// export default connect(\r\n//   mapStateToProps,\r\n//   mapDispatchToProps\r\n// )(withUrlDataContainerComponent);\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,OAASC,OAAO,KAAQ,aAAa,CACrC,OACEC,SAAS,CACTC,cAAc,CACdC,YAAY,KACP,4BAA4B,CACnC,OAASC,WAAW,CAAEC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACtE,OAASC,gBAAgB,KAAQ,4BAA4B,CAC7D,OAASC,OAAO,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhC,KAAM,CAAAC,gBAAgB,QAAS,CAAAb,KAAK,CAACc,SAAU,CAC7CC,iBAAiBA,CAAA,CAAG,CAClB,GAAI,CAAAC,MAAM,CAAG,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,MAAM,CAACH,MAAM,CAC5C,GAAI,CAACA,MAAM,CAAE,CACXA,MAAM,CAAG,IAAI,CAACC,KAAK,CAACG,gBAAgB,CACpC;AACA,GAAI,CAACJ,MAAM,CAAE,CACX,IAAI,CAACC,KAAK,CAACI,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC,CACnC,CACF,CACAC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAE,IAAI,CAACP,KAAK,CAAC,CAClD,IAAI,CAACA,KAAK,CAACb,cAAc,CAACY,MAAM,CAAC,CAAE;AACnC,IAAI,CAACC,KAAK,CAACd,SAAS,CAACa,MAAM,CAAC,CAC9B,CACAS,MAAMA,CAAA,CAAG,CACP,mBACEb,IAAA,CAACX,OAAO,KACF,IAAI,CAACgB,KAAK,CACdS,OAAO,CAAE,IAAI,CAACT,KAAK,CAACS,OAAQ,CAC5BC,MAAM,CAAE,IAAI,CAACV,KAAK,CAACU,MAAO,CAC1BtB,YAAY,CAAE,IAAI,CAACY,KAAK,CAACZ,YAAa,CACvC,CAAC,CAEN,CACF,CAEA,QAAS,CAAAuB,UAAUA,CAACd,SAAS,CAAE,CAC7B,QAAS,CAAAe,uBAAuBA,CAACZ,KAAK,CAAE,CACtC,GAAI,CAAAa,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAC5B,GAAI,CAAAyB,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAC5B,GAAI,CAAAY,MAAM,CAAGX,SAAS,CAAC,CAAC,CACxB,mBAAOI,IAAA,CAACE,SAAS,KAAKG,KAAK,CAAEC,MAAM,CAAE,CAAEY,QAAQ,CAAEC,QAAQ,CAAEZ,MAAO,CAAE,CAAE,CAAC,CACzE,CACA,MAAO,CAAAU,uBAAuB,CAChC,CACA,GAAI,CAAAG,eAAe,CAAIC,KAAK,GAAM,CAChCP,OAAO,CAAEO,KAAK,CAACC,WAAW,CAACR,OAAO,CAClCC,MAAM,CAAEM,KAAK,CAACC,WAAW,CAACP,MAAM,CAChCQ,MAAM,CAAEF,KAAK,CAACG,IAAI,CAACD,MAAM,CACzBf,gBAAgB,CAAEa,KAAK,CAACG,IAAI,CAACpB,MAC/B,CAAC,CAAC,CACF,GAAI,CAAAqB,kBAAkB,CAAG,CAAEjC,cAAc,CAAED,SAAS,CAAEE,YAAa,CAAC,CAEpE;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA,cAAe,CAAAK,OAAO,CACpBkB,UAAU,CACV1B,OAAO,CAAC8B,eAAe,CAAEK,kBAAkB,CAAC,CAC5C5B,gBACF,CAAC,CAACI,gBAAgB,CAAC,CAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}