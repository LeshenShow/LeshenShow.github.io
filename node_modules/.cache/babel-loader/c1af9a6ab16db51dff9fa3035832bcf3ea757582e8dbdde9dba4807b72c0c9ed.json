{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Leshen\\\\Desktop\\\\JS\\\\after_courses\\\\react\\\\ZooPlanet\\\\LeshenShow.github.io\\\\src\\\\components\\\\Users\\\\UsersContainer.jsx\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { follow, requestUsers, setCurrentPage, unfollow } from \"../../redux/usersReducer\";\nimport Users from \"./Users\";\nimport Preloader from \"../common/Preloader/Preloader\";\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\nimport { compose } from \"redux\";\nimport { getCurrentPage, getFollowingInProgress, getIsFetching, getMaxPages, getPageSize, getTotalUsersCount, getUsers } from \"../../redux/usersSelectors\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass UsersAPIComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    // наследуемся от родит класса, иначе по умолчанию наследование идет\n    // constructor(props) {\n    //   super(props);\n    // }\n    // getUsers = () => {\n    //   if (this.props.users.length === 0) {\n    //     axios\n    //       .get(\"https://social-network.samuraijs.com/api/1.0/users\")\n    //       .then((response) => {\n    //         this.props.setUsers(response.data.items);\n    //       });\n    //   }\n    // };\n    // ________________________________________________________________________________\n    // до появления thunk\n    //   console.log(\"componentDidMount\");\n    //   this.props.toggleIsFetching(true);\n    //   usersAPI\n    //     .getUsers(this.props.currentPage, this.props.pageSize)\n    //     .then((data) => {\n    //       this.props.toggleIsFetching(false);\n    //       let userList = data.items;\n    //       let totalUsersCount = data.totalCount;\n    //       this.props.setUsers(userList);\n    //       this.props.setTotalUsersCount(totalUsersCount);\n    //       // console.log(\"componentDidMount\", response);\n    //       // console.log(\"data\", data);\n    //     });\n    // }\n    this.onPageChanged = pageNumberEvent => {\n      let {\n        pageSize\n      } = this.props;\n      this.props.requestUsers(pageNumberEvent, pageSize);\n      // this.props.toggleIsFetching(true);\n      // this.props.setCurrentPage(pageNumberEvent);\n      // usersAPI.getUsers(pageNumberEvent, this.props.pageSize).then((data) => {\n      //   this.props.toggleIsFetching(false);\n      //   this.props.setUsers(data.items);\n      // });\n    };\n  }\n  componentDidMount() {\n    let {\n      currentPage,\n      pageSize\n    } = this.props;\n    this.props.requestUsers(currentPage, pageSize);\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.props.isFetching ? /*#__PURE__*/_jsxDEV(Preloader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 34\n      }, this) : null, /*#__PURE__*/_jsxDEV(Users, {\n        totalUsersCount: this.props.totalUsersCount,\n        pageSize: this.props.pageSize,\n        currentPage: this.props.currentPage,\n        users: this.props.users,\n        follow: this.props.follow,\n        unfollow: this.props.unfollow,\n        onPageChanged: this.onPageChanged,\n        followingInProgress: this.props.followingInProgress\n        // maxPages={this.props.maxPages}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}\nlet mapStateToProps = state => {\n  console.log(\"UsersContainer\", state);\n  return {\n    // users: state.usersPage.users,\n    // pageSize: state.usersPage.pageSize,\n    // totalUsersCount: state.usersPage.totalUsersCount,\n    // currentPage: state.usersPage.currentPage,\n    // isFetching: state.usersPage.isFetching,\n    // followingInProgress: state.usersPage.followingInProgress,\n\n    // ADD SELECTORS\n    users: getUsers(state),\n    pageSize: getPageSize(state),\n    totalUsersCount: getTotalUsersCount(state),\n    currentPage: getCurrentPage(state),\n    isFetching: getIsFetching(state),\n    followingInProgress: getFollowingInProgress(state)\n    // maxPages: getMaxPages(state),\n  };\n};\nlet mapDispatchToProps = {\n  follow,\n  unfollow,\n  setCurrentPage,\n  requestUsers\n};\n// export default withAuthRedirect(\n//   connect(mapStateToProps, mapDispatchToProps)(UsersAPIComponent)\n// );\nexport default compose(\n// withAuthRedirect, // добавляем защиту аутентификации\nconnect(mapStateToProps, mapDispatchToProps))(UsersAPIComponent);\n\n// let withRedirect = withAuthRedirect(UsersAPIComponent);\n// export default connect(mapStateToProps, mapDispatchToProps)(withRedirect);\n\n// let mapDispatchToProps = (dispatch = null) => {\n//   return {\n//     follow: (userId) => {dispatch(followAC(userId));},\n//     unfollow: (userId) => {dispatch(unfollowAC(userId));},\n//     setUsers: (users) => {dispatch(setUsersAC(users));},\n//     setCurrentPage: (currentPage) => {dispatch(setCurrentPageAC(currentPage));},\n//     setTotalUsersCount: (totalUsersCount) => {dispatch(setTotalUsersCountAC(totalUsersCount));},\n//     toggleIsFetching: (isFetching) => {dispatch(toggleIsFetchingAC(isFetching));},\n//   };};\n// ------------------->\n// let mapDispatchToProps = {\n//   follow: followAC,\n//   unfollow: unfollowAC,\n//   setUsers: setUsersAC,\n//   setCurrentPage: setCurrentPageAC,\n//   setTotalUsersCount: setTotalUsersCountAC,\n//   toggleIsFetching: toggleIsFetchingAC,\n// };","map":{"version":3,"names":["React","connect","follow","requestUsers","setCurrentPage","unfollow","Users","Preloader","withAuthRedirect","compose","getCurrentPage","getFollowingInProgress","getIsFetching","getMaxPages","getPageSize","getTotalUsersCount","getUsers","jsxDEV","_jsxDEV","Fragment","_Fragment","UsersAPIComponent","Component","constructor","args","onPageChanged","pageNumberEvent","pageSize","props","componentDidMount","currentPage","render","children","isFetching","fileName","_jsxFileName","lineNumber","columnNumber","totalUsersCount","users","followingInProgress","mapStateToProps","state","console","log","mapDispatchToProps"],"sources":["C:/Users/Leshen/Desktop/JS/after_courses/react/ZooPlanet/LeshenShow.github.io/src/components/Users/UsersContainer.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  follow,\r\n  requestUsers,\r\n  setCurrentPage,\r\n  unfollow,\r\n} from \"../../redux/usersReducer\";\r\nimport Users from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport { withAuthRedirect } from \"../../hoc/withAuthRedirect\";\r\nimport { compose } from \"redux\";\r\nimport {\r\n  getCurrentPage,\r\n  getFollowingInProgress,\r\n  getIsFetching,\r\n  getMaxPages,\r\n  getPageSize,\r\n  getTotalUsersCount,\r\n  getUsers,\r\n} from \"../../redux/usersSelectors\";\r\n\r\nclass UsersAPIComponent extends React.Component {\r\n  componentDidMount() {\r\n    let { currentPage, pageSize } = this.props;\r\n    this.props.requestUsers(currentPage, pageSize);\r\n  }\r\n  // наследуемся от родит класса, иначе по умолчанию наследование идет\r\n  // constructor(props) {\r\n  //   super(props);\r\n  // }\r\n  // getUsers = () => {\r\n  //   if (this.props.users.length === 0) {\r\n  //     axios\r\n  //       .get(\"https://social-network.samuraijs.com/api/1.0/users\")\r\n  //       .then((response) => {\r\n  //         this.props.setUsers(response.data.items);\r\n  //       });\r\n  //   }\r\n  // };\r\n  // ________________________________________________________________________________\r\n  // до появления thunk\r\n  //   console.log(\"componentDidMount\");\r\n  //   this.props.toggleIsFetching(true);\r\n\r\n  //   usersAPI\r\n  //     .getUsers(this.props.currentPage, this.props.pageSize)\r\n  //     .then((data) => {\r\n  //       this.props.toggleIsFetching(false);\r\n  //       let userList = data.items;\r\n  //       let totalUsersCount = data.totalCount;\r\n  //       this.props.setUsers(userList);\r\n  //       this.props.setTotalUsersCount(totalUsersCount);\r\n  //       // console.log(\"componentDidMount\", response);\r\n  //       // console.log(\"data\", data);\r\n  //     });\r\n  // }\r\n  onPageChanged = (pageNumberEvent) => {\r\n    let { pageSize } = this.props;\r\n    this.props.requestUsers(pageNumberEvent, pageSize);\r\n    // this.props.toggleIsFetching(true);\r\n    // this.props.setCurrentPage(pageNumberEvent);\r\n    // usersAPI.getUsers(pageNumberEvent, this.props.pageSize).then((data) => {\r\n    //   this.props.toggleIsFetching(false);\r\n    //   this.props.setUsers(data.items);\r\n    // });\r\n  };\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.props.isFetching ? <Preloader /> : null}\r\n        <Users\r\n          totalUsersCount={this.props.totalUsersCount}\r\n          pageSize={this.props.pageSize}\r\n          currentPage={this.props.currentPage}\r\n          users={this.props.users}\r\n          follow={this.props.follow}\r\n          unfollow={this.props.unfollow}\r\n          onPageChanged={this.onPageChanged}\r\n          followingInProgress={this.props.followingInProgress}\r\n          // maxPages={this.props.maxPages}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n  console.log(\"UsersContainer\", state);\r\n  return {\r\n    // users: state.usersPage.users,\r\n    // pageSize: state.usersPage.pageSize,\r\n    // totalUsersCount: state.usersPage.totalUsersCount,\r\n    // currentPage: state.usersPage.currentPage,\r\n    // isFetching: state.usersPage.isFetching,\r\n    // followingInProgress: state.usersPage.followingInProgress,\r\n\r\n    // ADD SELECTORS\r\n    users: getUsers(state),\r\n    pageSize: getPageSize(state),\r\n    totalUsersCount: getTotalUsersCount(state),\r\n    currentPage: getCurrentPage(state),\r\n    isFetching: getIsFetching(state),\r\n    followingInProgress: getFollowingInProgress(state),\r\n    // maxPages: getMaxPages(state),\r\n  };\r\n};\r\nlet mapDispatchToProps = {\r\n  follow,\r\n  unfollow,\r\n  setCurrentPage,\r\n  requestUsers,\r\n};\r\n// export default withAuthRedirect(\r\n//   connect(mapStateToProps, mapDispatchToProps)(UsersAPIComponent)\r\n// );\r\nexport default compose(\r\n  // withAuthRedirect, // добавляем защиту аутентификации\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(UsersAPIComponent);\r\n\r\n// let withRedirect = withAuthRedirect(UsersAPIComponent);\r\n// export default connect(mapStateToProps, mapDispatchToProps)(withRedirect);\r\n\r\n// let mapDispatchToProps = (dispatch = null) => {\r\n//   return {\r\n//     follow: (userId) => {dispatch(followAC(userId));},\r\n//     unfollow: (userId) => {dispatch(unfollowAC(userId));},\r\n//     setUsers: (users) => {dispatch(setUsersAC(users));},\r\n//     setCurrentPage: (currentPage) => {dispatch(setCurrentPageAC(currentPage));},\r\n//     setTotalUsersCount: (totalUsersCount) => {dispatch(setTotalUsersCountAC(totalUsersCount));},\r\n//     toggleIsFetching: (isFetching) => {dispatch(toggleIsFetchingAC(isFetching));},\r\n//   };};\r\n// ------------------->\r\n// let mapDispatchToProps = {\r\n//   follow: followAC,\r\n//   unfollow: unfollowAC,\r\n//   setUsers: setUsersAC,\r\n//   setCurrentPage: setCurrentPageAC,\r\n//   setTotalUsersCount: setTotalUsersCountAC,\r\n//   toggleIsFetching: toggleIsFetchingAC,\r\n// };\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,aAAa;AACrC,SACEC,MAAM,EACNC,YAAY,EACZC,cAAc,EACdC,QAAQ,QACH,0BAA0B;AACjC,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,SAAS,MAAM,+BAA+B;AACrD,SAASC,gBAAgB,QAAQ,4BAA4B;AAC7D,SAASC,OAAO,QAAQ,OAAO;AAC/B,SACEC,cAAc,EACdC,sBAAsB,EACtBC,aAAa,EACbC,WAAW,EACXC,WAAW,EACXC,kBAAkB,EAClBC,QAAQ,QACH,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEpC,MAAMC,iBAAiB,SAASrB,KAAK,CAACsB,SAAS,CAAC;EAAAC,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAK9C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAAA,KACAC,aAAa,GAAIC,eAAe,IAAK;MACnC,IAAI;QAAEC;MAAS,CAAC,GAAG,IAAI,CAACC,KAAK;MAC7B,IAAI,CAACA,KAAK,CAACzB,YAAY,CAACuB,eAAe,EAAEC,QAAQ,CAAC;MAClD;MACA;MACA;MACA;MACA;MACA;IACF,CAAC;EAAA;EA3CDE,iBAAiBA,CAAA,EAAG;IAClB,IAAI;MAAEC,WAAW;MAAEH;IAAS,CAAC,GAAG,IAAI,CAACC,KAAK;IAC1C,IAAI,CAACA,KAAK,CAACzB,YAAY,CAAC2B,WAAW,EAAEH,QAAQ,CAAC;EAChD;EAyCAI,MAAMA,CAAA,EAAG;IACP,oBACEb,OAAA,CAAAE,SAAA;MAAAY,QAAA,GACG,IAAI,CAACJ,KAAK,CAACK,UAAU,gBAAGf,OAAA,CAACX,SAAS;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,GAAG,IAAI,eAC7CnB,OAAA,CAACZ,KAAK;QACJgC,eAAe,EAAE,IAAI,CAACV,KAAK,CAACU,eAAgB;QAC5CX,QAAQ,EAAE,IAAI,CAACC,KAAK,CAACD,QAAS;QAC9BG,WAAW,EAAE,IAAI,CAACF,KAAK,CAACE,WAAY;QACpCS,KAAK,EAAE,IAAI,CAACX,KAAK,CAACW,KAAM;QACxBrC,MAAM,EAAE,IAAI,CAAC0B,KAAK,CAAC1B,MAAO;QAC1BG,QAAQ,EAAE,IAAI,CAACuB,KAAK,CAACvB,QAAS;QAC9BoB,aAAa,EAAE,IAAI,CAACA,aAAc;QAClCe,mBAAmB,EAAE,IAAI,CAACZ,KAAK,CAACY;QAChC;MAAA;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC;IAAA,eACF,CAAC;EAEP;AACF;AAEA,IAAII,eAAe,GAAIC,KAAK,IAAK;EAC/BC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,KAAK,CAAC;EACpC,OAAO;IACL;IACA;IACA;IACA;IACA;IACA;;IAEA;IACAH,KAAK,EAAEvB,QAAQ,CAAC0B,KAAK,CAAC;IACtBf,QAAQ,EAAEb,WAAW,CAAC4B,KAAK,CAAC;IAC5BJ,eAAe,EAAEvB,kBAAkB,CAAC2B,KAAK,CAAC;IAC1CZ,WAAW,EAAEpB,cAAc,CAACgC,KAAK,CAAC;IAClCT,UAAU,EAAErB,aAAa,CAAC8B,KAAK,CAAC;IAChCF,mBAAmB,EAAE7B,sBAAsB,CAAC+B,KAAK;IACjD;EACF,CAAC;AACH,CAAC;AACD,IAAIG,kBAAkB,GAAG;EACvB3C,MAAM;EACNG,QAAQ;EACRD,cAAc;EACdD;AACF,CAAC;AACD;AACA;AACA;AACA,eAAeM,OAAO;AACpB;AACAR,OAAO,CAACwC,eAAe,EAAEI,kBAAkB,CAC7C,CAAC,CAACxB,iBAAiB,CAAC;;AAEpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}